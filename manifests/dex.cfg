issuer: https://dex.{{.domain}}
storage:
  type: kubernetes
  config:
    inCluster: true
web:
  https: 0.0.0.0:8443
  tlsCert: /ssl/tls.crt
  tlsKey: /ssl/tls.key
frontend:
   theme: "coreos"
   {{ if index . "brand" }}
   issuer: "{{.brand.name}}"
   issuerUrl: "{{.brand.url}}"
   logoUrl: "{{.brand.logo}}"
   {{ end }}
logger:
  level: "debug"
connectors:
- type: ldap
  id: ldap
  name: LDAP
  config:
    host: {{.ldap.host}}:636
    insecureSkipVerify: true
    bindDN: $AD_USERNAME
    bindPW: $AD_PASSWORD

    userSearch:
      baseDN: {{.ldap.dn}}
      filter: "(objectClass=person)"
      username: sAMAccountName
      idAttr: DN
      emailAttr: mail
      nameAttr: displayName

    groupSearch:
      baseDN: {{.ldap.dn}}
      filter: "(objectClass=group)"
      userAttr: DN
      groupAttr: member
      nameAttr: name
staticClients:
- id: kubernetes
  redirectURIs:
  - 'http://localhost:8000'
  name: 'Kubernetes'
  secret: ZXhhbXBsZS1hcHAtc2VjcmV0
